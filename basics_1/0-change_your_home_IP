#!/usr/bin/env bash
# This script reconfigures /etc/hosts so localhost resolves to 127.0.0.2 and facebook.com resolves to 8.8.8.8

# Backup current hosts file
cp /etc/hosts /etc/hosts.bak

# Replace or add localhost entry
sed -i 's/^127\.0\.0\.1[[:space:]]\+localhost/127.0.0.2 localhost/' /etc/hosts
if ! grep -q "^127\.0\.0\.2[[:space:]]\+localhost" /etc/hosts; then
  echo "127.0.0.2   localhost" >> /etc/hosts
fi

# Replace or add facebook.com entry
sed -i '/facebook.com/d' /etc/hosts
echo "8.8.8.8     facebook.com" >> /etc/hosts
